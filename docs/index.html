<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NetMan Exercise Type Shi</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container fade-in">
    <h1 class="title">
      Hello from <span class="highlight">The Netman Chronicles ğŸ‘‹</span>
    </h1>

    <p class="subtitle">
      Our secure remote team is connected via 
      <strong>Tailscale VPN</strong> and deployed this site with 
      <strong>GitHub</strong>!
    </p>

    <button class="deploy-btn" id="deployBtn">Pass Hands-On</button>

    <div class="member-list">
      <h2>ğŸ‘¥ Team Members</h2>
      <ul>
        <li>Marq Gerozaga</li>
        <li>WhiteBeard Boquecosa</li>
        <li>Reel SaldaÃ±a</li>
        <li>Kyer Ivan OppenJayme</li>
        <!-- <li>Igneous Soco</li> -->
      </ul>
    </div>
  </div>

  <footer>
    <p>ğŸ”’ Secured by Tailscale VPN | âœ… Verified by MFA | ğŸš€ Deployed on GitHub</p>
  </footer>

  <!-- MFA Popup -->
  <div class="mfa-popup" id="mfaPopup">
    <div class="popup-content slide-up">
      <h2>ğŸ” Multi-Factor Authentication</h2>
      <p id="mfaMessage">A PIN is being sent to your mobile number...</p>

      <div class="pin-input hidden" id="pinInput">
        <input type="text" id="pinField" maxlength="6" placeholder="Enter 6-digit PIN" />
        <button id="verifyBtn">Verify</button>
      </div>

      <div class="loading-spinner" id="spinner"></div>
    </div>
  </div>

  <script>
    const btn = document.getElementById('deployBtn');
    const popup = document.getElementById('mfaPopup');
    const mfaMsg = document.getElementById('mfaMessage');
    const pinSection = document.getElementById('pinInput');
    const verifyBtn = document.getElementById('verifyBtn');
    const spinner = document.getElementById('spinner');
    const pinField = document.getElementById('pinField');

    const MFA_CODE = "911420";
    let verified = false; // track session state

    // If verified already, show the state instantly
    function setVerifiedState() {
      btn.classList.add('active');
      btn.textContent = 'âœ… MFA Verified';
      btn.disabled = true;
    }

    // Click on main button
    btn.addEventListener('click', () => {
      if (verified) return; // do nothing if already verified

      popup.style.display = 'flex';
      spinner.style.display = 'block';
      btn.disabled = true;

      // Simulate sending PIN
      setTimeout(() => {
        spinner.style.display = 'none';
        mfaMsg.textContent = 'PIN sent to your mobile number.';
        pinSection.classList.remove('hidden');
        pinSection.classList.add('fade-in');
      }, 2000);
    });

    // Verify PIN logic
    verifyBtn.addEventListener('click', () => {
      const pin = pinField.value.trim();

      if (pin === MFA_CODE) {
        verified = true; // persist until refresh
        mfaMsg.textContent = 'âœ… Verified successfully!';
        pinSection.style.display = 'none';
        spinner.style.display = 'block';

        setTimeout(() => {
          spinner.style.display = 'none';
          popup.style.display = 'none';
          setVerifiedState();
        }, 1500);
      } else {
        mfaMsg.textContent = 'âŒ Invalid PIN. Try again.';
        mfaMsg.style.color = '#f87171';
        pinField.classList.add('shake');
        setTimeout(() => pinField.classList.remove('shake'), 600);
      }
    });
  </script>
</body>
</html>
